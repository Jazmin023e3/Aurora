<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/_mainLayout}">
<head>
    <title layout:fragment="title">Mantenimiento de Detalle de Venta</title>
</head>
<body>
<section layout:fragment="content">

    <h2 th:text="${detalleVenta.idDetalle != null ? 'Editar Detalle' : 'Nuevo Detalle'}"></h2>

    <form th:action="@{/detalleVentas/save}" th:object="${detalleVenta}" method="post" class="mt-3">

        <input type="hidden" th:field="*{idDetalle}"/>

        <div class="mb-3">
            <label class="form-label">Venta:</label>
            <select th:field="*{venta}" class="form-select" required>
                <option th:each="venta : ${ventas}" 
                        th:value="${venta}" 
                        th:text="${venta.idVenta} + ' - ' + ${venta.cliente.nombre}">Venta</option>
            </select>
        </div>

        <div class="mb-3">
            <label class="form-label">Anillo:</label>
            <select th:field="*{anillo}" class="form-select" required>
                <option th:each="anillo : ${anillos}" 
                        th:value="${anillo}" 
                        th:text="${anillo.nombre} + ' (' + ${anillo.material} + ')'">Anillo</option>
            </select>
        </div>

        <div class="mb-3">
            <label class="form-label">Cantidad:</label>
            <input type="number" th:field="*{cantidad}" class="form-control" placeholder="Ej: 2" required/>
        </div>

        <div class="mb-3">
            <label class="form-label">Precio Unitario:</label>
            <input type="number" step="0.01" th:field="*{precioUnitario}" class="form-control" placeholder="Ej: 120.50" required/>
        </div>

        <div class="mb-3">
            <label class="form-label">Subtotal:</label>
            <input type="number" step="0.01" th:field="*{subtotal}" class="form-control" placeholder="Ej: 241.00" readonly/>
        </div>

        <div class="d-flex justify-content-between">
            <a th:href="@{/detalleVentas}" class="btn btn-secondary">Cancelar</a>
            <button type="submit" class="btn btn-primary">Guardar</button>
        </div>

    </form>

</section>
</body>
</html>
