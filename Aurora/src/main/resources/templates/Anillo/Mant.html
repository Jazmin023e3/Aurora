<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/Layout"
      layout:decorate="~{Layout/_mainLayout}">
<head>
    <title layout:fragment="title"
           th:text="${action == 'create' ? 'Crear Anillo' : 
                     (action == 'edit' ? 'Editar Anillo' : 
                     (action == 'view' ? 'Ver Anillo' : 'Eliminar Anillo'))}">
    </title>
</head>
<body>
<section layout:fragment="content">
    
    <h2 th:text="${action == 'create' ? 'Crear Nuevo Anillo' :
                     (action == 'edit' ? 'Editar Anillo' :
                     (action == 'view' ? 'Detalles del Anillo' : 'Confirmar Eliminación'))}">
    </h2>

    <div th:if="${msgSuccess}" class="alert alert-success" role="alert" th:text="${msgSuccess}"></div>
    <div th:if="${msgError}" class="alert alert-danger" role="alert" th:text="${msgError}"></div>

    <form th:action="${action == 'delete' ? @{/anillos/delete} : @{/anillos/save}}"
          th:object="${anillo}"
          th:method="${action == 'delete' ? 'post' : 'post'}"
          class="mt-3">

        <input type="hidden" th:field="*{idAnillo}"/>
        
        <input type="hidden" name="action" th:value="${action}" />

        <div class="mb-3">
            <label class="form-label">Nombre:</label>
            <input type="text" th:field="*{nombre}" class="form-control" placeholder="Ej: Anillo de oro"
                   th:disabled="${action == 'view' || action == 'delete'}" required/>
        </div>

        <div class="mb-3">
            <label class="form-label">Material:</label>
            <input type="text" th:field="*{material}" class="form-control" placeholder="Ej: Oro, Plata"
                   th:disabled="${action == 'view' || action == 'delete'}" required/>
        </div>

        <div class="mb-3">
            <label class="form-label">Piedra:</label>
            <input type="text" th:field="*{piedra}" class="form-control" placeholder="Ej: Diamante, Rubí"
                   th:disabled="${action == 'view' || action == 'delete'}"/>
        </div>

        <div class="mb-3">
            <label class="form-label">Talla:</label>
            <input type="text" th:field="*{talla}" class="form-control" placeholder="Ej: 6, 7, 8"
                   th:disabled="${action == 'view' || action == 'delete'}" required/>
        </div>

        <div class="mb-3">
            <label class="form-label">Peso (g):</label>
            <input type="number" step="0.01" th:field="*{peso}" class="form-control" placeholder="Ej: 5.25"
                   th:disabled="${action == 'view' || action == 'delete'}" required/>
        </div>

        <div class="mb-3">
            <label class="form-label">Precio ($):</label>
            <input type="number" step="0.01" th:field="*{precio}" class="form-control" placeholder="Ej: 120.50"
                   th:disabled="${action == 'view' || action == 'delete'}" required/>
        </div>

        <div class="mb-3">
            <label class="form-label">Stock:</label>
            <input type="number" th:field="*{stock}" class="form-control" placeholder="Ej: 15"
                   th:disabled="${action == 'view' || action == 'delete'}" required/>
        </div>
        
        <div class="d-flex justify-content-between mt-4">
            <a th:href="@{/anillos}" class="btn btn-secondary">
                <span th:text="${action == 'view' || action == 'delete' ? 'Regresar' : 'Cancelar'}"></span>
            </a>
            
            <button th:if="${action == 'create' || action == 'edit'}" type="submit" class="btn btn-primary">
                Guardar
            </button>
            <button th:if="${action == 'delete'}" type="submit" class="btn btn-danger">
                Confirmar Eliminación
            </button>
        </div>
        
    </form>
</section>
</body>
</html>